---
published: false
date: '2021-01-11 23:30:00 +0900'
categories:
  - Spring
  - 기초
tags:
  - 면접
  - spring
  - ioc
  - di
---
* 이 포스트는 마틴 파울러의 [Inversion of Control Containers and the Dependency Injection pattern](https://martinfowler.com/articles/injection.html)을 읽고 작성되었습니다.


## ❔Why 'Inversion of Control & Dependency Injection'
 요즘 J2EE를 대체하기 위한 오픈소스들 중에서 고민하고 있는 공통적인 문제는 서로 다른 요소를 연결하는 방법입니다. 예를 들어 웹 컨트롤러 아키텍처가 서로에 대한 지식이 거의없는 다른 팀들에 의해 구축되었을 때, 데이터베이스 인터페이스는 어떻게 맞춰야할까요?


## 🥚 Get started..
 간단한 예제로, 특정 영화 감독의 영화 목록을 제공하는 component 를 살펴 봅시다.
```
class MovieLister...

  public Movie[] moviesDirectedBy(String directorName) {
      List allMovies = finder.findAll();
      for (Iterator it = allMovies.iterator(); it.hasNext();) {
          Movie movie = (Movie) it.next();
          if (!movie.getDirector().equals(directorName)) it.remove();
      }
      return (Movie[]) allMovies.toArray(new Movie[allMovies.size()]);
  }
```
* 알고 있는 모든 영화를 가져오기 위해 finder 객체를 요청
* 이 목록을 검색하여 특정 감독이 감독 한 항목만 남김


### ✔ point
 본 글에서 다루고자 하는 핵심은 특정 finder 객체를 이 MovieLister 객체와 연결하는 방법입니다. 이 점이 흥미로운 이유는 우리가 'moviesDirectedBy' 메서드가 영화 리스트의 저장방식과 완전히 독립적이기를 바라기 때문입니다.

 메서드가 하는 일은 finder를 참조하는 것 뿐이며, finder가 하는 일은 'findAll' 메서드에 응답하는 방법을 아는 것 뿐입니다.

 finder 인터페이스로 findAll 메소드 사용방법을 정의할 수 있습니다.
```
public interface MovieFinder {
    List findAll();
}
```
 이제 모든 것이 매우 잘 분리되어 있지만, 실제로 영화 리스트를 만들기 위해 구현 class를 만들어야 합니다. 이 코드를 Lister class의 생성자에 넣었습니다.
```
class MovieLister...

  private MovieFinder finder;
  public MovieLister() {
    finder = new ColonDelimitedMovieFinder("movies1.txt");
  }
```
 이제 이 class을 혼자만 사용한다면 모든 것이 좋습니다. 하지만 친구들이 이 기능을 사용하고 싶어한다면 어떨까요? 
 
 친구들도 영화 목록을 "movies1.txt"라는 콜론으로 구분 된 텍스트 파일에 저장한다면 베스트겠죠. 만약 영화 목록 파일의 이름이 다른 경우 properties 파일에 영화 목록 파일 이름을 넣으면 됩니다. 

 그러나 SQL 데이터베이스, XML 파일, 웹 서비스 또는 다른 형식의 텍스트 파일과 같이 완전히 다른 형식의 영화 목록을 저장하는 경우에는 어떻게 될까요? 이 경우 해당 데이터를 가져 오기 위해 다른 class가 필요합니다. 
 
 이전에 우리가 'MovieFinder' 인터페이스를 정의 했으므로 'moviesDirectedBy' method는 변경되지 않을 것입니다. 그러나 올바른 finder 구현체의 instance를 올바르게 배치하려면 여전히 몇 가지 방법이 필요합니다.

![그림 1](https://martinfowler.com/articles/injection/naive.gif)















