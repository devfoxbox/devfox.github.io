---
published: false
date: '2021-01-11 23:30:00 +0900'
categories:
  - Spring
  - 기초
tags:
  - 면접
  - spring
  - ioc
  - di
---
* 이 포스트는 마틴 파울러의 [Inversion of Control Containers and the Dependency Injection pattern](https://martinfowler.com/articles/injection.html)을 읽고 작성되었습니다.


## ❔Why 'Inversion of Control & Dependency Injection'

 엔터프라이즈 Java 세계에서 흥미로운 점 중 하나는 주류 J2EE 기술에 대한 대안을 구축하는 데 엄청난 양의 활동이 있다는 것입니다. 대부분은 오픈 소스에서 이루어집니다. 이 중 상당수는 주류 J2EE 세계의 무거운 복잡성에 대한 반응이지만, 대부분은 대안을 모색하고 창의적인 아이디어를 내고 있습니다.  

 처리해야 할 일반적인 문제는 서로 다른 요소를 연결하는 방법입니다. 서로에 대한 지식이 거의없는 서로 다른 팀에 의해 구축되었을 때, 이 웹 컨트롤러 아키텍처를 해당 데이터베이스 인터페이스 백업과 함께 어떻게 결합해야 할까요? 

## 🥚 Get started..
간단한 예제로, 특정 영화 감독의 영화 목록을 제공하는 component 를 살펴 봅시다.
```
class MovieLister...

  public Movie[] moviesDirectedBy(String directorName) {
      List allMovies = finder.findAll();
      for (Iterator it = allMovies.iterator(); it.hasNext();) {
          Movie movie = (Movie) it.next();
          if (!movie.getDirector().equals(directorName)) it.remove();
      }
      return (Movie[]) allMovies.toArray(new Movie[allMovies.size()]);
  }
```
* 알고 있는 모든 영화를 가져오기 위해 finder 객체를 요청
* 이 목록을 검색하여 특정 감독이 감독 한 항목만 남김


### ✔ real point
이 article의 진짜 요점은 MovieLister 객체를 특정 finder 객체와 연결하는 방법입니다. 

우리는 'moviesDirectedBy' 메서드가 모든 영화가 저장되는 방식과 완전히 독립적이기를 원합니다. 메서드가 하는 일은 파인더를 참조하는 것이며, 파인더가 하는 일은 'findAll' 메서드에 응답하는 방법을 아는 것 뿐입니다. 파인더에 대한 인터페이스를 정의하여 이를 가져올 수 있습니다.
```
public interface MovieFinder {
    List findAll();
}
```
이제 모든 것이 매우 잘 분리되어 있지만, 어떤 시점에서 실제로 영화 리스트를 만들기 위해 구체적인 class를 만들어야 합니다. 이 경우에 대한 코드를 내 Lister class의 생성자에 넣었습니다.
```
class MovieLister...

  private MovieFinder finder;
  public MovieLister() {
    finder = new ColonDelimitedMovieFinder("movies1.txt");
  }
```
 이제 이 class을 나 자신만을 위해 사용한다면,이 모든 것이 좋습니다. 하지만 친구들이 이 멋진 기능을 사용하고 싶어 이 프로그램의 사본을 원하면 어떨까요? 
 
 친구들도 영화 목록을 "movies1.txt"라는 콜론으로 구분 된 텍스트 파일에 저장하는게 베스트겠죠. 만약 영화 목록 파일의 이름이 다른 경우 properties 파일에 영화 목록 파일 이름을 넣으면 됩니다. 

 그러나 SQL 데이터베이스, XML 파일, 웹 서비스 또는 다른 형식의 텍스트 파일과 같이 완전히 다른 형식의 영화 목록을 저장하는 경우에는 어떻게 될까요? 이 경우 해당 데이터를 가져 오기 위해 다른 class가 필요합니다. 
 
 이전에 우리가 'MovieFinder' 인터페이스를 정의 했으므로 'moviesDirectedBy' method는 변경되지 않을 것입니다. 그러나 올바른 finder 구현체의 instance를 올바르게 배치하려면 여전히 몇 가지 방법이 필요합니다.











